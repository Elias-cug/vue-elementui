# AntvG 框架实现拓扑图绘制

## 1 实现思想

创建拓扑图基类，实现基本的方法。其余拓扑类继承基类实现。

### 1-1 实现方法

1. 动态增加插件
2. 初始化画布
3. 动态添加事件
   - 点击节点事件
   - 鼠标移入节点事件
   - 鼠标移出节点事件
   - 鼠标移入边事件
   - 鼠标移出边事件
   - 鼠标点击画布事件
4. 销毁画布
5. 切换主题
6. 改变画布大小
7. 合并配置
8. 数据过滤
   - 节点过滤
   - 边过滤
   - combo过滤
9. 数据渲染

### 1-2 渲染流程

## 2 构造函数

## 3 动态增加插件

在初始化中调用，根据不同的拓扑增加不同的插件

### 2-1 实现插件

1. 节点 toolTip
2. 边 toolTip

### 2-2 拓扑使用

1. 全局拓扑：【边toolTip】
2. 主机拓扑：【边toolTip】
3. 交易拓扑：【节点toolTip】

## 4 初始化画布

根据合并的配置创建画布、增加事件

## 5 销毁画布

画布重绘前、页面销毁后触发

## 6 改变画布大小

window resize后、其他使画布区域变化的操作发生后触发。**防抖函数中实现此方法**。

## 7 合并配置

将各类拓扑的私有配置合并到默认配置上

### 7-1 默认配置

### 7-2 全局拓扑配置

### 7-3 主机拓扑配置

### 7-4 交易拓扑配置

## 8 数据过滤

将后端返回的数据进行清洗

### 8-1 节点清洗

### 8-2 边清洗

### 8-3 combos清洗

## 9 数据渲染

将清洗后的数据进行渲染